
		<?php echo $this->headScript()
            
            ->appendFile($this->basePath() . '/js/jquery-2.1.1.min.js')
            ->appendFile($this->basePath() . '/js/jquery-ui-1.10.3.min.js')
            ->appendFile($this->basePath() . '/js/app.config.js')
            ->appendFile($this->basePath() . '/js/smartwidgets/jarvis.widget.min.js')
            ->appendFile($this->basePath() . '/js/bootstrap.min.js')
            ->appendFile($this->basePath() . '/js/plugin/pace/pace.min.js')
            ->appendFile($this->basePath() . '/js/app.min.js')
            ->appendFile($this->basePath() . '/js/demo.min.js')
            ->prependFile($this->basePath() . '/js/plugin/jquery-touch/jquery.ui.touch-punch.min.js')
            ->appendFile($this->basePath() . '/js/smartwidgets/jarvis.widget.min.js')
            ->appendFile($this->basePath() . '/js/plugin/select2/select2.min.js')
           ->appendFile($this->basePath() . '/js/ajaxform.js')
           ->appendFile($this->basePath() . '/js/edit.js')
           ->appendFile($this->basePath() . '/js/editterm.js')
             //  $this->headScript()->prependFile('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js', 'text/javascript')
              //      ->prependFile('http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js', 'text/javascript')
                //    ->appendFile('/jqGrid/js/i18n/grid.locale-en.js', 'text/javascript')
                //    ->appendFile('/jqGrid/plugins/ui.multiselect.js', 'text/javascript')
                //    ->appendFile('/jqGrid/js/jquery.jqGrid.min.js', 'text/javascript') 
        ; ?>
        <div style="padding:auto;"
<div id="winpopup"></div><div id="termpopup"></div>
<article class="col-md-7" style="margin:auto;">
		<!-- Widget ID (each widget will need unique ID)-->
	<div class="jarviswidget jarviswidget" id="wid-id-3" data-widget-colorbutton="false" data-widget-editbutton="false">
			<header style="background:#274A80; color:#fff;">
				<span class="widget-icon"> <i class="fa fa-table"></i> </span>
					<h2><strong>SESSION AND TERM MANAGEMENT </strong></h2>
			</header>
					<!-- widget div-->
					<div>
						<!-- widget edit box -->
							<div class="jarviswidget-editbox">
									<!-- This area used as dropdown edit box -->
							</div>
									<!-- end widget edit box -->
									<!-- widget content -->
	<div class="widget-body">
		<ul id="myTab1" class="nav nav-tabs bordered">
			<li class="active"><a href="#s1" data-toggle="tab">SESSION</a></li>
			<li><a href="#s2" data-toggle="tab"><i class="fa fa-fw fa-lg fa-gear"></i> TERM</a>	</li>					
		</ul>
			<div id="myTabContent1" class="tab-content padding-10">
				
			<div class="tab-pane fade in active" id="s1">
					
					<!-- Add session block starts here -->
				<div class="row" style="background:#274A80; margin-top:8px; margin-bottom:8px; padding:5px;">
				<?php $form = $this->form;
				$form->setAttribute('action', $this->url('admin/default',array('action'=> 'addsession','controller' => 'session')));
				$form->prepare(); ?>
				<?php echo $this->form()->openTag($form); ?>
				
				<fieldset>
				
				<div class="col-md-6">
				<?php echo $this->formElementErrors($form->get('sessionName')); ?>
					<div class="input-group">
					<span class="input-group-addon">Session Name</span>
					<?php echo $this->formInput($form->get('sessionName')); ?>
					</div>
				</div>
												 
				<div class="col-md-6"><div class="input-group">
					<span class="input-group-addon">Status</span>
				<?php echo $this->formSelect($form->get('status')); ?>
			  	<?php echo $this->formElementErrors($form->get('status')); ?></div>
					<div class="input-group">
					<?php echo $this->formRow($form->get('submit')); ?>
					</div>
				</div>
				
				</fieldset>
				<?php echo $this->form()->closeTag(); ?>
				</div>
				<!-- Add session block ends here -->
					<!-- Session list starts here -->
					<div class="row">
					<div class="custom-scroll table-responsive col-md-12" style="height:194px; overflow-y:scroll;">
					<table id="" class="table table-bordered table-hover" width="100%" style="margin-top:5px;">
						<thead> 
							<tr>
								<th>Session Name</th>
								<th>Session Status</th>
								<th>Action </th>
							</tr>
						</thead>
						<tbody>
							<?php foreach ($sessions as $session) : ?>
							<tr>
						    <td><?php echo $this->escapeHtml($session->getsessionName());?></td>
						    <td><?php echo $this->escapeHtml($session->getstatus());?></td>
						    <td>
 <a id="edit" href="<?php echo $this->url('admin/default',array('controller' => 'session','action'=>'edit', 'id' => $session->getid()));?>"><button class="btn btn-xs btn-default"><i class='fa fa-pencil'></i></button></a>

<a id="conf" href="<?php echo $this->url('admin/default',array('controller' => 'session','action'=>'delete', 'id' => $session->getid()));?>"onclick="return confirm('Do you rely want to delete this session?')"><button class="btn btn-xs btn-default"><i class='fa fa-times'></i></button></a>
							</td>
							</tr>
							</tbody>
						<?php endforeach; ?>
					</table>
					</div>		
					</div>
					<!-- Session list ends here-->			
				</div>
				
		<div class="tab-pane fade" id="s2">
			<div class="row" style="background:#274A80; margin-top:8px; margin-bottom:8px; padding:5px;">
				
				<div class="col-md-12">
				
				<?php $formterm = $this->formterm;
				$formterm->setAttribute('action', $this->url('admin/default',array('action'=> 'addterm','controller' => 'session')));
				$formterm->prepare(); ?>
				<?php echo $this->form()->openTag($formterm); ?>
				
			<div class="col-md-6">			
			<?php echo $this->formElementErrors($formterm->get('termName')); ?>
				<div class="input-group">
				<span class="input-group-addon">Term Name</span>
				<?php echo $this->formInput($formterm->get('termName')); ?>
				</div>
			</div>
			<div class="col-md-6">
			<?php echo $this->formRow($formterm->get('submit')); ?>
			</div>
					
			<?php echo $this->form()->closeTag(); ?>
			
				</div>
			</div>
				
			<div class="row">
				<div class="col-md-12">
					<div class="custom-scroll table-responsive" style="height:194px; overflow-y:scroll;">
				<table id="" class="table table-bordered table-hover" width="100%" style="margin-top:5px;">
					<thead> 
						<tr>
						    <th>Term Name</th>
						    <th>Action</th>
						</tr>
					</thead>
				<tbody>
					<?php foreach ($terms as $term) : ?>
						<tr>
				    <td><?php echo $this->escapeHtml($term->gettermName());?></td>
				    <td>
<a id="editterm" href="<?php echo $this->url('admin/default',array('controller' => 'session','action'=>'editterm', 'id' => $term->getid()));?>"><button class="btn btn-xs btn-default"><i class='fa fa-pencil'></i></button></a>

<a id="conf" href="<?php echo $this->url('admin/default',array('controller' => 'session','action'=>'deleteterm', 'id' => $term->getid()));?>"onclick="return confirm('Do you rely want to delete this session?')"><button class="btn btn-xs btn-default"><i class='fa fa-times'></i></button></a>
					</td>													     
						</tr>
				</tbody>
			<?php endforeach; ?>
				</table>
			</div>
			</div>		
			</div>
			</div>
			
				
											
										</div>
				
									</div>
									<!-- end widget content -->
									
								</div>
								<!-- end widget div -->
				
							</div>
</article>

	</div>													

<script type="text/javascript">
		
		// DO NOT REMOVE : GLOBAL FUNCTIONS!
		var urlform = "<?php echo $this->url('admin/default', array('action' => 'addsession')) ?>";
		$(document).ready(function() {
			
			pageSetUp();

					$('form').submit(function(event) {
					$.ajax({
					type : 'POST',
					url : urlform,
					data : $('form').serialize(),
					dataType : 'json',
					encode : true
					})
					.done(function(data) {
					console.log(data);
					})
					.fail(function(data) {
					console.log('Error che: ');
					console.log(data);
					});
					event.preventDefault();
					}); 

			// START AND FINISH DATE
			$('#startdate').datepicker({
				dateFormat : 'dd.mm.yy',
				prevText : '<i class="fa fa-chevron-left"></i>',
				nextText : '<i class="fa fa-chevron-right"></i>',
				onSelect : function(selectedDate) {
					$('#enddate').datepicker('option', 'minDate', selectedDate);
				}
			});
			
			$('#enddate').datepicker({
				dateFormat : 'dd.mm.yy',
				prevText : '<i class="fa fa-chevron-left"></i>',
				nextText : '<i class="fa fa-chevron-right"></i>',
				onSelect : function(selectedDate) {
					$('#startdate').datepicker('option', 'maxDate', selectedDate);
				}
			});
			

			$("#conf").click(function(e) {
				$.SmartMessageBox({
					title : "Smart Alert!",
					content : "This is a confirmation box. Can be programmed for button callback",
					buttons : '[No][Yes]'
				}, function(ButtonPressed) {
					if (ButtonPressed === "Yes") {
		
						$.smallBox({
							title : "Callback function",
							content : "<i class='fa fa-clock-o'></i> <i>You pressed Yes...</i>",
							color : "#659265",
							iconSmall : "fa fa-check fa-2x fadeInRight animated",
							timeout : 4000
						});
					}
					if (ButtonPressed === "No") {
						$.smallBox({
							title : "Callback function",
							content : "<i class='fa fa-clock-o'></i> <i>You pressed No...</i>",
							color : "#C46A69",
							iconSmall : "fa fa-times fa-2x fadeInRight animated",
							timeout : 4000
						});
					}
		
				});
				e.preventDefault();
			})
			/* // DOM Position key index //
		
			l - Length changing (dropdown)
			f - Filtering input (search)
			t - The Table! (datatable)
			i - Information (records)
			p - Pagination (paging)
			r - pRocessing 
			< and > - div elements
			<"#id" and > - div with an id
			<"class" and > - div with a class
			<"#id.class" and > - div with an id and class
			
			Also see: http://legacy.datatables.net/usage/features
			*/	
	
			/* BASIC ;*/
				var responsiveHelper_dt_basic = undefined;
				var responsiveHelper_datatable_fixed_column = undefined;
				var responsiveHelper_datatable_col_reorder = undefined;
				var responsiveHelper_datatable_tabletools = undefined;
				
				var breakpointDefinition = {
					tablet : 1024,
					phone : 480
				};
	
				$('#dt_basic').dataTable({
					"sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6'f><'col-sm-6 col-xs-12 hidden-xs'l>r>"+
						"t"+
						"<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-6'p>>",
					"autoWidth" : true,
					"preDrawCallback" : function() {
						// Initialize the responsive datatables helper once.
						if (!responsiveHelper_dt_basic) {
							responsiveHelper_dt_basic = new ResponsiveDatatablesHelper($('#dt_basic'), breakpointDefinition);
						}
					},
					"rowCallback" : function(nRow) {
						responsiveHelper_dt_basic.createExpandIcon(nRow);
					},
					"drawCallback" : function(oSettings) {
						responsiveHelper_dt_basic.respond();
					}
				});
	
			/* END BASIC */
			
			/* COLUMN FILTER  */
		    var otable = $('#datatable_fixed_column').DataTable({
		    	//"bFilter": false,
		    	//"bInfo": false,
		    	//"bLengthChange": false
		    	//"bAutoWidth": false,
		    	//"bPaginate": false,
		    	//"bStateSave": true // saves sort state using localStorage
				"sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6 hidden-xs'f><'col-sm-6 col-xs-12 hidden-xs'<'toolbar'>>r>"+
						"t"+
						"<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-6'p>>",
				"autoWidth" : true,
				"preDrawCallback" : function() {
					// Initialize the responsive datatables helper once.
					if (!responsiveHelper_datatable_fixed_column) {
						responsiveHelper_datatable_fixed_column = new ResponsiveDatatablesHelper($('#datatable_fixed_column'), breakpointDefinition);
					}
				},
				"rowCallback" : function(nRow) {
					responsiveHelper_datatable_fixed_column.createExpandIcon(nRow);
				},
				"drawCallback" : function(oSettings) {
					responsiveHelper_datatable_fixed_column.respond();
				}		
			
		    });
		    
		    // custom toolbar
		    $("div.toolbar").html('<div class="text-right"><img src="img/logo.png" alt="SmartAdmin" style="width: 111px; margin-top: 3px; margin-right: 10px;"></div>');
		    	   
		    // Apply the filter
		    $("#datatable_fixed_column thead th input[type=text]").on( 'keyup change', function () {
		    	
		        otable
		            .column( $(this).parent().index()+':visible' )
		            .search( this.value )
		            .draw();
		            
		    } );
		    /* END COLUMN FILTER */   
	    
			/* COLUMN SHOW - HIDE */
			$('#datatable_col_reorder').dataTable({
				"sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6'f><'col-sm-6 col-xs-6 hidden-xs'C>r>"+
						"t"+
						"<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",
				"autoWidth" : true,
				"preDrawCallback" : function() {
					// Initialize the responsive datatables helper once.
					if (!responsiveHelper_datatable_col_reorder) {
						responsiveHelper_datatable_col_reorder = new ResponsiveDatatablesHelper($('#datatable_col_reorder'), breakpointDefinition);
					}
				},
				"rowCallback" : function(nRow) {
					responsiveHelper_datatable_col_reorder.createExpandIcon(nRow);
				},
				"drawCallback" : function(oSettings) {
					responsiveHelper_datatable_col_reorder.respond();
				}			
			});
			
			/* END COLUMN SHOW - HIDE */
			$(document).ready(function(){
   			 $('#dt_basic').DataTable();
			});
	
			/* TABLETOOLS */
			$('#datatable_tabletools').dataTable({
				
				// Tabletools options: 
				//   https://datatables.net/extensions/tabletools/button_options
				"sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6'f><'col-sm-6 col-xs-6 hidden-xs'T>r>"+
						"t"+
						"<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",
		        "oTableTools": {
		        	 "aButtons": [
		             "copy",
		             "csv",
		             "xls",
		                {
		                    "sExtends": "pdf",
		                    "sTitle": "SmartAdmin_PDF",
		                    "sPdfMessage": "SmartAdmin PDF Export",
		                    "sPdfSize": "letter"
		                },
		             	{
	                    	"sExtends": "print",
	                    	"sMessage": "Generated by SmartAdmin <i>(press Esc to close)</i>"
	                	}
		             ],
		            "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
		        },
				"autoWidth" : true,
				"preDrawCallback" : function() {
					// Initialize the responsive datatables helper once.
					if (!responsiveHelper_datatable_tabletools) {
						responsiveHelper_datatable_tabletools = new ResponsiveDatatablesHelper($('#datatable_tabletools'), breakpointDefinition);
					}
				},
				"rowCallback" : function(nRow) {
					responsiveHelper_datatable_tabletools.createExpandIcon(nRow);
				},
				"drawCallback" : function(oSettings) {
					responsiveHelper_datatable_tabletools.respond();
				}
			});
			
			/* END TABLETOOLS */
		
		})

		</script>
